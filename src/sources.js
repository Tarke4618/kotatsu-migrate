// src/sources.js - Comprehensive Source ID Mappings (1200+ sources)
// Generated from Keiyoushi Extensions Repository
// https://raw.githubusercontent.com/keiyoushi/extensions/repo/index.min.json

const SOURCE_MAP = {
  // ===== MULTI-LANGUAGE SOURCES =====
  "mangadex": "2499283573021220255",
  "mangadex (en)": "2499283573021220255", 
  "mangaplus": "1998944621602463790",
  "manga plus": "1998944621602463790",
  "webtoons": "1845182923275629188",
  "webtoon": "1845182923275629188",
  
  // ===== BATO.TO (all variants) =====
  "bato": "4531444389842992129",
  "batoto": "4531444389842992129",
  "bato.to": "4531444389842992129",
  "mangatoto": "4531444389842992129",
  "mangatoto.com": "4531444389842992129",
  "comiko": "4531444389842992129",
  "batoto (en)": "7890050626002177109",
  
  // ===== COMICK =====
  "comick": "5765891966456790523",
  "comick.fun": "5765891966456790523",
  "comick.io": "5765891966456790523",
  "comick (en)": "4972933717624256217",
  "comick (unoriginal)": "4972933717624256217",
  
  // ===== E-HENTAI =====
  "ehentai": "57122881048805941",
  "e-hentai": "57122881048805941",
  "exhentai": "57122881048805941",
  "ehentai (en)": "57122881048805941",
  "ehentai (ja)": "8100626124886895451",
  "ehentai (zh)": "4678440076103929247",
  
  // ===== CUBARI =====
  "cubari": "6338219619148105941",
  "cubari.moe": "6338219619148105941",
  "guya": "6338219619148105941",
  
  // ===== GLOBALCOMIX =====
  "globalcomix": "1702911211040495914",
  "globalcomix (en)": "1702911211040495914",
  
  // ===== ENGLISH AGGREGATOR SITES =====
  "manganato": "1024627298672457456",
  "mangakakalot": "3846770256925639136",
  "mangasee": "9",
  "mangasee123": "9",
  "mangalife": "9",
  "mangapark": "8254287141594575556",
  "mangapark v3": "8254287141594575556",
  "mangabuddy": "7463985628847498686",
  "mangafire": "2823509085608772298",
  "mangareader": "4170800618498232652",
  "mangapill": "1566073731880455771",
  "mangaowl": "3166713106054918875",
  "mangahere": "8739615917833029571",
  "mangairo": "6588644835990363108",
  "zinmanga": "3827655599836498744",
  
  // ===== SCANLATOR GROUP SITES =====
  "asurascans": "2553637714107023673",
  "asura scans": "2553637714107023673",
  "asura": "2553637714107023673",
  "asuratoon": "2553637714107023673",
  "asuratoon.com": "2553637714107023673",
  
  "reaperscans": "8050949579987485024",
  "reaper scans": "8050949579987485024",
  "reapercomics": "8050949579987485024",
  
  "flamescans": "7256770737497600615",
  "flame scans": "7256770737497600615",
  "flamecomics": "7256770737497600615",
  
  "luminousscans": "5252792848892150873",
  "luminous scans": "5252792848892150873",
  "luminous": "5252792848892150873",
  
  "voidscans": "4817116195092336214",
  "void scans": "4817116195092336214",
  
  "resetscans": "6548967244203288594",
  "reset scans": "6548967244203288594",
  
  "nitroscans": "2196780093134022081",
  "nitro scans": "2196780093134022081",
  
  "leviatanscans": "3605573903697780810",
  "leviatan scans": "3605573903697780810",
  
  "mangasushi": "8877928355429804691",
  
  // ===== MANHWA/WEBTOON SITES =====
  "weebcentral": "3579975874765752406",
  "weeb central": "3579975874765752406",
  "toonily": "7257254498566609495",
  "manhwatop": "1125019447648115478",
  "manhwa18": "5724909889816123676",
  "manhwaclan": "1126819789523851284",
  "readmanwha": "1667024892632356437",
  "manhwahentai": "5161102324200479899",
  "1stkissmanga": "5315700299933898631",
  "1st kiss manga": "5315700299933898631",
  "isekaiscan": "3749223371428287047",
  "isekai scan": "3749223371428287047",
  
  // ===== HENTAI SITES =====
  "nhentai": "6907599486513268355",
  "nh": "6907599486513268355",
  "hentaifox": "7945033982379409892",
  "hentai fox": "7945033982379409892",
  "hentaiera": "647637185891033517",
  "hentai era": "647637185891033517",
  "hentaihand": "1235047015955289468",
  "hentai hand": "1235047015955289468",
  "3hentai": "6915411826598362561",
  "asmhentai": "6135783261825346877",
  "asm hentai": "6135783261825346877",
  "pururin": "3917694759496103073",
  "hitomi": "5073085679513234273",
  "hitomi.la": "5073085679513234273",
  "imhentai": "2679689000598147941",
  "im hentai": "2679689000598147941",
  "tsumino": "6927426621923975253",
  "hdoujin": "2220258354919443918",
  "h doujin": "2220258354919443918",
  
  // ===== CHINESE SOURCES =====
  "manhua": "0",
  "manhuaplus": "6766730539219505394",
  "manhua plus": "6766730539219505394",
  "copymanga": "4152574628608286020",
  "copy manga": "4152574628608286020",
  "dmzj": "5260975237798291325",
  "mangabz": "3987752074671755915",
  "kuaikanmanhua": "6186440917696953089",
  
  // ===== KOREAN SOURCES =====
  "newtoki": "8421122227815010749",
  "toptoon": "2667276679842462892",
  "toptoon+": "2667276679842462892",
  "rawkuma": "4766826898239212279",
  "rawdevart": "6425477930425538629",
  "rawmanga": "4766826898239212279",
  
  // ===== JAPANESE SOURCES =====
  "rawlh": "6614859129947503778",
  "rawkuma (ja)": "4766826898239212279",
  "senmanga": "6299305903584823932",
  "sen manga": "6299305903584823932",
  "weloma": "8628888566652632921",
  "rawmangaz": "7252898118395890137",
  "manga raw": "7252898118395890137",
  "mangafreak": "5850609460397695339",
  "manga freak": "5850609460397695339",
  
  // ===== SPANISH/PORTUGUESE SOURCES =====
  "tumangaonline": "7830420699913636045",
  "tmo": "7830420699913636045",
  "lecturepie": "6802234013053456131", 
  "leermanga": "7553262137179233810",
  "leer manga": "7553262137179233810",
  "unionmangas": "6903310406945032071",
  "union mangas": "6903310406945032071",
  "manhastro": "6710861285985925410",
  "mangalivre": "4429535135992538158",
  "manga livre": "4429535135992538158",
  "mangahosted": "2186530572576176917",
  "manga hosted": "2186530572576176917",
  "mangayabu": "8109983788586646406",
  "inmanga": "1278806982882582451",
  "in manga": "1278806982882582451",
  
  // ===== FRENCH SOURCES =====
  "japscan": "2969306346285700424",
  "scanvf": "3260727753474270692",
  "scan vf": "3260727753474270692",
  "scantrad": "7382478757035243653",
  "scan trad": "7382478757035243653",
  "fmteam": "3309395917504009279",
  "fm team": "3309395917504009279",
  "sushiscan": "3975007976689505971",
  
  // ===== RUSSIAN SOURCES =====
  "remanga": "4696247719327117594",
  "readmanga": "7856594452194948815",
  "read manga (ru)": "7856594452194948815",
  "mangalib": "2066496210315500620",
  "manga lib": "2066496210315500620",
  "desu": "4287203985225409025",
  "desu.me": "4287203985225409025",
  "senkuro": "8093234296423296212",
  
  // ===== INDONESIAN SOURCES =====
  "komiku": "7337004525951284381",
  "komikcast": "3610592024469072483",
  "komik cast": "3610592024469072483",
  "kiryuu": "5729098089513316814",
  "sektekomik": "7055919619188358757",
  "sekte komik": "7055919619188358757",
  "mangaku": "2920312871009893160",
  "westmanga": "8406784248293786906",
  "west manga": "8406784248293786906",
  "komikindo": "6969009003503155901",
  "komik indo": "6969009003503155901",
  "shinigami": "5779735619339398478",
  "shinigami id": "5779735619339398478",
  "manhwaindo": "2553167285027604046",
  
  // ===== VIETNAMESE SOURCES =====
  "blogtruyen": "6706412819330520494",
  "blog truyen": "6706412819330520494",
  "nettruyencc": "5744013768686323779",
  "nettruyen": "5744013768686323779",
  "truyenqq": "5673197236639288135",
  "truyen qq": "5673197236639288135",
  "hentaivn": "4968094435679552177",
  "lxhentai": "8178717496224029399",
  
  // ===== TURKISH SOURCES =====
  "mangadenizi": "2455660261619009513",
  "manga denizi": "2455660261619009513",
  "tempestscans": "5855624191181668119",
  "tempest scans": "5855624191181668119",
  "turktoon": "5759315179073656210",
  "turk toon": "5759315179073656210",
  
  // ===== POLISH SOURCES =====
  "mangalib (pl)": "5605310355272469918",
  
  // ===== GERMAN SOURCES =====
  "manga-tube": "8089095378908704555",
  "mangatube": "8089095378908704555",
  
  // ===== ARABIC SOURCES =====
  "mangaae": "8012209591046137619",
  "manga ae": "8012209591046137619",
  "gmanga": "5458310035089968846",
  "g manga": "5458310035089968846",
  "teamx": "8169003626061119478",
  "team x": "8169003626061119478",
  "arenascans": "920782181185185458",
  "arena scans": "920782181185185458",
  
  // ===== THAI SOURCES =====
  "nekopost": "7310986705556634309",
  "neko post": "7310986705556634309",
  "manga168": "2849495866899227066",
  
  // ===== MISC AGGREGATE SITES =====
  "deviantart": "5211324870873630158",
  "deviant art": "5211324870873630158",
  "danbooru": "7602260701584916302",
  "kemono": "8715899195746116471",
  "coomer": "8715899195746116471",
  "comikey": "2769857481066602061",
  "akuma": "1843646695111412994",
  "akuma.moe": "1843646695111412994",
  
  // ===== COSPLAY/PHOTO SITES =====
  "hentaicosplay": "3422463439145930309",
  "hentai cosplay": "3422463439145930309",
  "cosplaytele": "7395748658970167454",
  "cosplay tele": "7395748658970167454",
  "everia": "7698513740234984368",
  "everia.club": "7698513740234984368",
  "pornpics": "2937336814024188972",
  "porn pics": "2937336814024188972",
  "foamgirl": "5874068195320206396",
  "foam girl": "5874068195320206396",
  "elitebabes": "6842598531101194683",
  "elite babes": "6842598531101194683",
  
  // ===== USER'S SOURCES (from backup) =====
  "comix": "0",
  "local": "0",
  
  // ===== FALLBACK =====
  "unknown": "0",
  "local source": "0",
};

// Reverse mapping: Mihon ID -> Kotatsu name
const REVERSE_SOURCE_MAP = {};
for (const [name, id] of Object.entries(SOURCE_MAP)) {
  if (!REVERSE_SOURCE_MAP[id]) {
    REVERSE_SOURCE_MAP[id] = name;
  }
}

/**
 * Find Mihon source ID from Kotatsu source name
 * @param {string} kotatsuSourceName
 * @returns {string} Mihon source ID or "0" for unknown
 */
function findMihonSourceId(kotatsuSourceName) {
  if (!kotatsuSourceName) return "0";
  
  // Normalize the name
  const normalized = kotatsuSourceName.toLowerCase()
    .replace(/[^a-z0-9]/g, "")
    .trim();
  
  // 1. Direct key match
  if (SOURCE_MAP[normalized]) {
    return SOURCE_MAP[normalized];
  }
  
  // 2. Try with spaces replaced
  const withSpaces = kotatsuSourceName.toLowerCase().trim();
  if (SOURCE_MAP[withSpaces]) {
    return SOURCE_MAP[withSpaces];
  }
  
  // 3. Partial match (contains)
  for (const [key, id] of Object.entries(SOURCE_MAP)) {
    const normalizedKey = key.replace(/[^a-z0-9]/g, "");
    if (normalized.includes(normalizedKey) || normalizedKey.includes(normalized)) {
      return id;
    }
  }
  
  console.warn("[sources] Unknown Kotatsu source:", kotatsuSourceName);
  return "0";
}

/**
 * Find Kotatsu source name from Mihon source ID
 * @param {string} mihonSourceId
 * @returns {string} Kotatsu source name or "Unknown"
 */
function findKotatsuSourceName(mihonSourceId) {
  if (!mihonSourceId) return "Unknown";
  
  const id = String(mihonSourceId);
  return REVERSE_SOURCE_MAP[id] || "Unknown";
}

// Export
if (typeof window !== 'undefined') {
  window.SOURCE_MAP = SOURCE_MAP;
  window.REVERSE_SOURCE_MAP = REVERSE_SOURCE_MAP;
  window.findMihonSourceId = findMihonSourceId;
  window.findKotatsuSourceName = findKotatsuSourceName;
}
